server:
  port: 8080
  forward-headers-strategy: framework

spring:
  application:
    name: mcp-tutorial-server

  # MongoDB Ayarlari - Lokal MongoDB'ye baglanir
  data:
    mongodb:
      uri: mongodb://localhost:27017/mcptutorialdb

  # MCP Server Ayarlari
  ai:
    mcp:
      server:
        name: user-management-mcp-server
        version: 1.0.0
        type: SYNC
        protocol: STREAMABLE

  # Disable default static resource handler so .well-known paths hit controllers
  web:
    resources:
      add-mappings: false

  # Thymeleaf - Login page
  thymeleaf:
    cache: false

  # OAuth2 - Tek sunucu hem Authorization Server hem Resource Server
  security:
    oauth2:
      # Authorization Server config (token uretme, client registration, JWKS)
      authorizationserver:
        issuer-url: https://gauzier-healingly-avril.ngrok-free.dev
        client:
          mcp-client:
            token:
              access-token-time-to-live: 1h
            registration:
              client-id: mcp-client
              client-secret: "{noop}secret"
              client-authentication-methods:
                - client_secret_basic
                - none
              authorization-grant-types:
                - authorization_code
                - client_credentials
              redirect-uris:
                - http://127.0.0.1:8080/authorize/oauth2/code/mcp-client
                - http://localhost:8080/authorize/oauth2/code/mcp-client
                - http://localhost:6274/oauth/callback
                - http://127.0.0.1:6274/oauth/callback
                - https://claude.ai/api/mcp/auth_callback
                - http://127.0.0.1:8081/callback
                - http://localhost:8081/callback
      # Resource Server config (JWT dogrulama)
      resourceserver:
        jwt:
          issuer-uri: https://gauzier-healingly-avril.ngrok-free.dev
